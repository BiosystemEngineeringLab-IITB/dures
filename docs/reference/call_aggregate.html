<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>call_aggregate — call_aggregate • dures</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="call_aggregate — call_aggregate"><meta property="og:description" content="Helper code to run derive_aggregate_spectra"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dures</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/dures-vignette.html">Demonstration of the package dures</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>call_aggregate</h1>
    
    <div class="hidden name"><code>call_aggregate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Helper code to run derive_aggregate_spectra</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">call_aggregate</span><span class="op">(</span><span class="va">spectra_list</span>, <span class="va">mz_tol</span>, <span class="va">folder_path</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>spectra_list:</dt>
<dd><p>list of spectra objects for all features, each containing top x% TIC spectra concatenated</p></dd>


<dt>mz_tol:</dt>
<dd><p>mass tolerance (in Da) required when grouping fragments across multiple spectra for a given feature</p></dd>


<dt>folder_path:</dt>
<dd><p>the path to the folder where you want to store the data reduction dataframe</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a list containing the aggregate spectra object and a dataframe of the aggregate spectra for all features</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example usage of the function</span></span></span>
<span class="r-in"><span><span class="va">folder_path</span> <span class="op">=</span> <span class="st">"/home/shayantan/Desktop/test_package_dures/test_2/"</span></span></span>
<span class="r-in"><span><span class="va">sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="preprocess.html">preprocess</a></span><span class="op">(</span><span class="va">folder_path</span>, <span class="fl">5</span>, <span class="fl">0.01</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *******************Sanity check for input files***********************</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ✓ Feature list file found!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ✓ Feature list file has the correct columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ✓ mzml folder exists</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RT tolerance file not found. Proceeding with the default mz tolerance of: 5 ppm and RT tolerance of: 0.01 minutes for all samples</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading mzml files</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |                                                                      |   1%  |                                                                              |=                                                                     |   1%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   3%  |                                                                              |===                                                                   |   4%  |                                                                              |===                                                                   |   5%  |                                                                              |====                                                                  |   5%  |                                                                              |====                                                                  |   6%  |                                                                              |=====                                                                 |   7%  |                                                                              |======                                                                |   8%  |                                                                              |======                                                                |   9%  |                                                                              |=======                                                               |   9%  |                                                                              |=======                                                               |  10%  |                                                                              |=======                                                               |  11%  |                                                                              |========                                                              |  11%  |                                                                              |========                                                              |  12%  |                                                                              |=========                                                             |  13%  |                                                                              |==========                                                            |  14%  |                                                                              |==========                                                            |  15%  |                                                                              |===========                                                           |  15%  |                                                                              |===========                                                           |  16%  |                                                                              |============                                                          |  17%  |                                                                              |=============                                                         |  18%  |                                                                              |=============                                                         |  19%  |                                                                              |==============                                                        |  19%  |                                                                              |==============                                                        |  20%  |                                                                              |==============                                                        |  21%  |                                                                              |===============                                                       |  21%  |                                                                              |===============                                                       |  22%  |                                                                              |================                                                      |  23%  |                                                                              |=================                                                     |  24%  |                                                                              |=================                                                     |  25%  |                                                                              |==================                                                    |  25%  |                                                                              |==================                                                    |  26%  |                                                                              |===================                                                   |  27%  |                                                                              |====================                                                  |  28%  |                                                                              |====================                                                  |  29%  |                                                                              |=====================                                                 |  29%  |                                                                              |=====================                                                 |  30%  |                                                                              |=====================                                                 |  31%  |                                                                              |======================                                                |  31%  |                                                                              |======================                                                |  32%  |                                                                              |=======================                                               |  33%  |                                                                              |========================                                              |  34%  |                                                                              |========================                                              |  35%  |                                                                              |=========================                                             |  35%  |                                                                              |=========================                                             |  36%  |                                                                              |==========================                                            |  37%  |                                                                              |===========================                                           |  38%  |                                                                              |===========================                                           |  39%  |                                                                              |============================                                          |  39%  |                                                                              |============================                                          |  40%  |                                                                              |============================                                          |  41%  |                                                                              |=============================                                         |  41%  |                                                                              |=============================                                         |  42%  |                                                                              |==============================                                        |  43%  |                                                                              |===============================                                       |  44%  |                                                                              |===============================                                       |  45%  |                                                                              |================================                                      |  45%  |                                                                              |================================                                      |  46%  |                                                                              |=================================                                     |  47%  |                                                                              |==================================                                    |  48%  |                                                                              |==================================                                    |  49%  |                                                                              |===================================                                   |  49%  |                                                                              |===================================                                   |  50%  |                                                                              |===================================                                   |  51%  |                                                                              |====================================                                  |  51%  |                                                                              |====================================                                  |  52%  |                                                                              |=====================================                                 |  53%  |                                                                              |======================================                                |  54%  |                                                                              |======================================                                |  55%  |                                                                              |=======================================                               |  55%  |                                                                              |=======================================                               |  56%  |                                                                              |========================================                              |  57%  |                                                                              |=========================================                             |  58%  |                                                                              |=========================================                             |  59%  |                                                                              |==========================================                            |  59%  |                                                                              |==========================================                            |  60%  |                                                                              |==========================================                            |  61%  |                                                                              |===========================================                           |  61%  |                                                                              |===========================================                           |  62%  |                                                                              |============================================                          |  63%  |                                                                              |=============================================                         |  64%  |                                                                              |=============================================                         |  65%  |                                                                              |==============================================                        |  65%  |                                                                              |==============================================                        |  66%  |                                                                              |===============================================                       |  67%  |                                                                              |================================================                      |  68%  |                                                                              |================================================                      |  69%  |                                                                              |=================================================                     |  69%  |                                                                              |=================================================                     |  70%  |                                                                              |=================================================                     |  71%  |                                                                              |==================================================                    |  71%  |                                                                              |==================================================                    |  72%  |                                                                              |===================================================                   |  73%  |                                                                              |====================================================                  |  74%  |                                                                              |====================================================                  |  75%  |                                                                              |=====================================================                 |  75%  |                                                                              |=====================================================                 |  76%  |                                                                              |======================================================                |  77%  |                                                                              |=======================================================               |  78%  |                                                                              |=======================================================               |  79%  |                                                                              |========================================================              |  79%  |                                                                              |========================================================              |  80%  |                                                                              |========================================================              |  81%  |                                                                              |=========================================================             |  81%  |                                                                              |=========================================================             |  82%  |                                                                              |==========================================================            |  83%  |                                                                              |===========================================================           |  84%  |                                                                              |===========================================================           |  85%  |                                                                              |============================================================          |  85%  |                                                                              |============================================================          |  86%  |                                                                              |=============================================================         |  87%  |                                                                              |==============================================================        |  88%  |                                                                              |==============================================================        |  89%  |                                                                              |===============================================================       |  89%  |                                                                              |===============================================================       |  90%  |                                                                              |===============================================================       |  91%  |                                                                              |================================================================      |  91%  |                                                                              |================================================================      |  92%  |                                                                              |=================================================================     |  93%  |                                                                              |==================================================================    |  94%  |                                                                              |==================================================================    |  95%  |                                                                              |===================================================================   |  95%  |                                                                              |===================================================================   |  96%  |                                                                              |====================================================================  |  97%  |                                                                              |===================================================================== |  98%  |                                                                              |===================================================================== |  99%  |                                                                              |======================================================================|  99%  |                                                                              |======================================================================| 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  MS2 data are not present in the following files:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Blank_01,Blank_02,x200708x_Pat_01_POS,x200708x_Pat_02_POS,x200708x_Pat_03_POS,x200708x_Pat_04_POS,x200708x_Pat_05_POS,x200708x_Pat_06_POS,x200708x_Pat_07_POS,x200708x_Pat_08_POS,x200708x_Pat_09_POS,x200708x_Pat_100_POS,x200708x_Pat_101_POS,x200708x_Pat_102_POS,x200708x_Pat_103_POS,x200708x_Pat_104_POS,x200708x_Pat_105_POS,x200708x_Pat_106_POS,x200708x_Pat_107_POS,x200708x_Pat_108_POS,x200708x_Pat_109_POS,x200708x_Pat_10_POS,x200708x_Pat_110_POS,x200708x_Pat_111_POS,x200708x_Pat_112_POS,x200708x_Pat_114_POS,x200708x_Pat_115_POS,x200708x_Pat_116_POS,x200708x_Pat_117_POS,x200708x_Pat_118_POS,x200708x_Pat_119_POS,x200708x_Pat_11_POS,x200708x_Pat_120_POS,x200708x_Pat_121_POS,x200708x_Pat_122_POS,x200708x_Pat_123_POS,x200708x_Pat_124_POS,x200708x_Pat_125_POS,x200708x_Pat_126_POS,x200708x_Pat_127_POS,x200708x_Pat_128_POS,x200708x_Pat_129_POS,x200708x_Pat_12_POS,x200708x_Pat_130_POS,x200708x_Pat_131_POS,x200708x_Pat_132_POS,x200708x_Pat_133_POS,x200708x_Pat_135_POS,x200708x_Pat_137_POS,x200708x_Pat_138_POS,x200708x_Pat_139_POS,x200708x_Pat_13_POS,x200708x_Pat_140_POS,x200708x_Pat_14_POS,x200708x_Pat_15_POS,x200708x_Pat_16_POS,x200708x_Pat_18_POS,x200708x_Pat_19_POS,x200708x_Pat_20_POS,x200708x_Pat_22_POS,x200708x_Pat_23_POS,x200708x_Pat_26_POS,x200708x_Pat_27_POS,x200708x_Pat_28_POS,x200708x_Pat_32_POS,x200708x_Pat_33_POS,x200708x_Pat_34_POS,x200708x_Pat_35_POS,x200708x_Pat_36_POS,x200708x_Pat_37_POS,x200708x_Pat_38_POS,x200708x_Pat_39_POS,x200708x_Pat_40_POS,x200708x_Pat_41_POS,x200708x_Pat_42_POS,x200708x_Pat_43_POS,x200708x_Pat_44_POS,x200708x_Pat_45_POS,x200708x_Pat_46_POS,x200708x_Pat_47_POS,x200708x_Pat_48_POS,x200708x_Pat_49_POS,x200708x_Pat_50_POS,x200708x_Pat_51_POS,x200708x_Pat_52_POS,x200708x_Pat_53_POS,x200708x_Pat_54_POS,x200708x_Pat_55_POS,x200708x_Pat_56_POS,x200708x_Pat_57_POS,x200708x_Pat_58_POS,x200708x_Pat_59_POS,x200708x_Pat_60_POS,x200708x_Pat_61_POS,x200708x_Pat_62_POS,x200708x_Pat_63_POS,x200708x_Pat_64_POS,x200708x_Pat_65_POS,x200708x_Pat_66_POS,x200708x_Pat_67_POS,x200708x_Pat_68_POS,x200708x_Pat_69_POS,x200708x_Pat_70_POS,x200708x_Pat_71_POS,x200708x_Pat_72_POS,x200708x_Pat_73_POS,x200708x_Pat_74_POS,x200708x_Pat_75_POS,x200708x_Pat_76_POS,x200708x_Pat_77_POS,x200708x_Pat_78_POS,x200708x_Pat_79_POS,x200708x_Pat_80_POS,x200708x_Pat_81_POS,x200708x_Pat_82_POS,x200708x_Pat_83_POS,x200708x_Pat_84_POS,x200708x_Pat_85_POS,x200708x_Pat_86_POS,x200708x_Pat_87_POS,x200708x_Pat_89_POS,x200708x_Pat_90_POS,x200708x_Pat_91_POS,x200708x_Pat_92_POS,x200708x_Pat_93_POS,x200708x_Pat_94_POS,x200708x_Pat_95_POS,x200708x_Pat_96_POS,x200708x_Pat_97_POS,x200708x_Pat_98_POS,x200708x_Pat_99_POS,x200708x_QC10_POS,x200708x_QC11_POS,x200708x_QC12_POS,x200708x_QC13_POS,x200708x_QC14_POS,x200708x_QC15_POS,x200708x_QC1_POS,x200708x_QC2_POS,x200708x_QC3_POS,x200708x_QC4_POS,x200708x_QC5_POS,x200708x_QC6_POS,x200708x_QC7_POS,x200708x_QC8_POS,x200708x_QC9_POS"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ✓ Spectra has been extracted from the mzml files</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Concatenating and checking if MS2 data is available for a given feature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MS2 spectra couldn't be extracted from a total of 82 features out of 100 features. They are as follows:2502,4552,3794,3941,3181,3819,1652,3677,2998,3726,3532,517,691,2790,4279,586,2364,4001,4116,1290,566,1319,4084,242,2385,782,534,1272,3930,4644,2815,2553,4589,4776,3462,57,806,3578,2597,4685,23,2263,1540,1142,226,708,414,316,1123,2983,3072,653,167,3687,2587,3859,1479,3913,1634,2220,1381,3447,655,3731,3224,2234,3292,691,425,841,486,2124,3440,3830,3766,823,3536,1856,444,944,1040,1244</span>
<span class="r-in"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="va">sp</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">sp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="extract_raw_spectra.html">extract_raw_spectra</a></span><span class="op">(</span><span class="va">folder_path</span>, <span class="va">l</span>, <span class="fl">0.05</span>, <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in txtProgressBar(min = 0, max = length(sps_aggregate_all_mets),     style = 3):</span> must have 'max' &gt; 'min'</span>
<span class="r-in"><span><span class="va">spectra_list</span> <span class="op">&lt;-</span> <span class="va">sp1</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'sp1' not found</span>
<span class="r-in"><span><span class="fu">call_aggregate</span><span class="op">(</span><span class="va">spectra_list</span>, <span class="fl">0.05</span>, <span class="va">folder_path</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'spectra_list' not found</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Shayantan Banerjee.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

